webpackJsonp([25],{0:function(t,u,b){b(2953);b(1733);b(553);b(419);b(1319);b(1399)},419:function(t,u){YUI.add("model",function(b,k){function c(){c.superclass.constructor.apply(this,arguments)}var l=YUI.namespace("Env.Model"),m=b.Lang,f=b.Array,a=b.Object,h="error";b.Model=b.extend(c,b.Base,{idAttribute:"id",_allowAdHocAttrs:!0,_isYUIModel:!0,initializer:function(a){this.changed={};this.lastChange={};this.lists=[]},destroy:function(a,h){var r=this;"function"===typeof a&&(h=a,a=null);r.onceAfter("destroy",
function(){function b(s){s||f.each(r.lists.concat(),function(h){h.remove(r,a)});h&&h.apply(null,arguments)}a&&(a.remove||a["delete"])?r.sync("delete",a,b):b()});return c.superclass.destroy.call(r)},generateClientId:function(){l.lastId||(l.lastId=0);return this.constructor.NAME+"_"+(l.lastId+=1)},getAsHTML:function(a){a=this.get(a);return b.Escape.html(m.isValue(a)?String(a):"")},getAsURL:function(a){a=this.get(a);return encodeURIComponent(m.isValue(a)?String(a):"")},isModified:function(){return this.isNew()||
!a.isEmpty(this.changed)},isNew:function(){return!m.isValue(this.get("id"))},load:function(a,b){var r=this;"function"===typeof a&&(b=a,a={});a||(a={});r.sync("read",a,function(f,c){var k={options:a,response:c},x;f?(k.error=f,k.src="load",r.fire(h,k)):(r._loadEvent||(r._loadEvent=r.publish("load",{preventable:!1})),x=k.parsed=r._parse(c),r.setAttrs(x,a),r.changed={},r.fire("load",k));b&&b.apply(null,arguments)});return r},parse:function(a){if("string"===typeof a)try{return b.JSON.parse(a)}catch(f){return this.fire(h,
{error:f,response:a,src:"parse"}),null}return a},save:function(a,b){var f=this;"function"===typeof a&&(b=a,a={});a||(a={});f._validate(f.toJSON(),function(c){c?b&&b.call(null,c):f.sync(f.isNew()?"create":"update",a,function(c,s){var k={options:a,response:s},l;c?(k.error=c,k.src="save",f.fire(h,k)):(f._saveEvent||(f._saveEvent=f.publish("save",{preventable:!1})),s&&(l=k.parsed=f._parse(s),f.setAttrs(l,a)),f.changed={},f.fire("save",k));b&&b.apply(null,arguments)})});return f},set:function(a,h,f){var b=
{};b[a]=h;return this.setAttrs(b,f)},setAttrs:function(h,f){var c=this.idAttribute,s,k,l,m;f=b.merge(f);m=f._transaction={};"id"!==c&&(h=b.merge(h),a.owns(h,c)?h.id=h[c]:a.owns(h,"id")&&(h[c]=h.id));for(k in h)a.owns(h,k)&&this._setAttr(k,h[k],f);if(!a.isEmpty(m)){c=this.changed;l=this.lastChange={};for(k in m)a.owns(m,k)&&(s=m[k],c[k]=s.newVal,l[k]={newVal:s.newVal,prevVal:s.prevVal,src:s.src||null});f.silent||(this._changeEvent||(this._changeEvent=this.publish("change",{preventable:!1})),f.changed=
l,this.fire("change",f))}return this},sync:function(){var a=f(arguments,0,!0).pop();"function"===typeof a&&a()},toJSON:function(){var a=this.getAttrs();delete a.clientId;delete a.destroyed;delete a.initialized;"id"!==this.idAttribute&&delete a.id;return a},undo:function(h,b){var c=this.lastChange,s=this.idAttribute,k={},l;h||(h=a.keys(c));f.each(h,function(h){a.owns(c,h)&&(h=h===s?"id":h,l=!0,k[h]=c[h].prevVal)});return l?this.setAttrs(k,b):this},validate:function(a,h){h&&h()},addAttr:function(a,
h,f){var b=this.idAttribute,k;b&&a===b&&(b=this._isLazyAttr("id")||this._getAttrCfg("id"),k=h.value===h.defaultValue?null:h.value,m.isValue(k)||(k=b.value===b.defaultValue?null:b.value,m.isValue(k)||(k=m.isValue(h.defaultValue)?h.defaultValue:b.defaultValue)),h.value=k,b.value!==k&&(b.value=k,this._isLazyAttr("id")?this._state.add("id","lazy",b):this._state.add("id","value",k)));return c.superclass.addAttr.apply(this,arguments)},_parse:function(a){return this.parse(a)},_validate:function(a,f){function b(k){m.isValue(k)?
(c.fire(h,{attributes:a,error:k,src:"validate"}),f(k)):f()}var c=this;1===c.validate.length?b(c.validate(a,b)):c.validate(a,b)},_setAttrVal:function(a,h,f,b,k,l){var m=c.superclass._setAttrVal.apply(this,arguments),t=k&&k._transaction,u=l&&l.initializing;m&&(t&&!u)&&(t[a]={newVal:this.get(a),prevVal:f,src:k.src||null});return m}},{NAME:"model",ATTRS:{clientId:{valueFn:"generateClientId",readOnly:!0},id:{value:null}}})},"3.17.2",{requires:["base-build","escape","json-parse"]})},553:function(t,u){YUI.add("model-list",
function(b,k){function c(){c.superclass.constructor.apply(this,arguments)}var l=b.Attribute.prototype,m=b.Lang,f=b.Array;b.ModelList=b.extend(c,b.Base,{model:b.Model,_isYUIModelList:!0,initializer:function(a){a||(a={});var h=this.model=a.model||this.model;"string"===typeof h&&((this.model=b.Object.getValue(b,h.split(".")))||b.error("ModelList: Model class not found: "+h));this.publish("add",{defaultFn:this._defAddFn});this.publish("reset",{defaultFn:this._defResetFn});this.publish("remove",{defaultFn:this._defRemoveFn});
this.after("*:idChange",this._afterIdChange);this._clear();a.items&&this.add(a.items,{silent:!0})},destructor:function(){this._clear()},add:function(a,h){var c=a._isYUIModelList;return c||m.isArray(a)?f.map(c?a.toArray():a,function(a,f){var c=h||{};"index"in c&&(c=b.merge(c,{index:c.index+f}));return this._add(a,c)},this):this._add(a,h)},create:function(a,h,f){var c=this;"function"===typeof h&&(f=h,h={});h||(h={});a._isYUIModel||(a=new this.model(a));c.fire("create",b.merge(h,{model:a}));return a.save(h,
function(b){b||c.add(a,h);f&&f.apply(null,arguments)})},each:function(a,h){var f=this._items.concat(),b,c,k;b=0;for(k=f.length;b<k;b++)c=f[b],a.call(h||c,c,b,this);return this},filter:function(a,h){var f=[],b=this._items,c,k,l;"function"===typeof a&&(h=a,a={});c=0;for(l=b.length;c<l;++c)k=b[c],h.call(this,k,c,this)&&f.push(k);return a.asList?(b=new this.constructor({model:this.model}),f.length&&b.add(f,{silent:!0}),b):f},get:function(a){return this.attrAdded(a)?l.get.apply(this,arguments):this.invoke("get",
a)},getAsHTML:function(a){return this.attrAdded(a)?b.Escape.html(l.get.apply(this,arguments)):this.invoke("getAsHTML",a)},getAsURL:function(a){return this.attrAdded(a)?encodeURIComponent(l.get.apply(this,arguments)):this.invoke("getAsURL",a)},getByClientId:function(a){return this._clientIdMap[a]||null},getById:function(a){return this._idMap[a]||null},invoke:function(a){var h=[this._items,a].concat(f(arguments,1,!0));return f.invoke.apply(f,h)},load:function(a,h){var f=this;"function"===typeof a&&
(h=a,a={});a||(a={});this.sync("read",a,function(b,c){var k={options:a,response:c},l;b?(k.error=b,k.src="load",f.fire("error",k)):(f._loadEvent||(f._loadEvent=f.publish("load",{preventable:!1})),l=k.parsed=f._parse(c),f.reset(l,a),f.fire("load",k));h&&h.apply(null,arguments)});return this},map:function(a,h){return f.map(this._items,a,h)},parse:function(a){if("string"===typeof a)try{return b.JSON.parse(a)||[]}catch(h){return this.fire("error",{error:h,response:a,src:"parse"}),null}return a||[]},remove:function(a,
h){var b=a._isYUIModelList;return b||m.isArray(a)?(a=f.map(b?a.toArray():a,function(a){return m.isNumber(a)?this.item(a):a},this),f.map(a,function(a){return this._remove(a,h)},this)):this._remove(a,h)},reset:function(a,h){a||(a=[]);h||(h={});var c=b.merge({src:"reset"},h);a=a._isYUIModelList?a.toArray():f.map(a,function(a){return a._isYUIModel?a:new this.model(a)},this);c.models=a;h.silent?this._defResetFn(c):(this.comparator&&a.sort(b.bind(this._sort,this)),this.fire("reset",c));return this},some:function(a,
h){var f=this._items.concat(),b,c,k;b=0;for(k=f.length;b<k;b++)if(c=f[b],a.call(h||c,c,b,this))return!0;return!1},sort:function(a){if(!this.comparator)return this;var h=this._items.concat();a||(a={});h.sort(b.rbind(this._sort,this,a));h=b.merge(a,{models:h,src:"sort"});a.silent?this._defResetFn(h):this.fire("reset",h);return this},sync:function(){var a=f(arguments,0,!0).pop();"function"===typeof a&&a()},toArray:function(){return this._items.concat()},toJSON:function(){return this.map(function(a){return a.toJSON()})},
_add:function(a,h){var f;h||(h={});a._isYUIModel||(a=new this.model(a));f=a.get("id");if(this._clientIdMap[a.get("clientId")]||m.isValue(f)&&this._idMap[f])this.fire("error",{error:"Model is already in the list.",model:a,src:"add"});else return f=b.merge(h,{index:"index"in h?h.index:this._findIndex(a),model:a}),h.silent?this._defAddFn(f):this.fire("add",f),a},_attachList:function(a){a.lists.push(this);a.addTarget(this)},_clear:function(){f.each(this._items,this._detachList,this);this._clientIdMap=
{};this._idMap={};this._items=[]},_compare:function(a,h){return a<h?-1:a>h?1:0},_detachList:function(a){var h=f.indexOf(a.lists,this);-1<h&&(a.lists.splice(h,1),a.removeTarget(this))},_findIndex:function(a){var h=this._items,f=h.length,b=0,c,k;if(!this.comparator||!f)return f;for(k=this.comparator(a);b<f;)c=b+f>>1,a=h[c],0>this._compare(this.comparator(a),k)?b=c+1:f=c;return b},_parse:function(a){return this.parse(a)},_remove:function(a,f){var c;f||(f={});m.isNumber(a)?(c=a,a=this.item(c)):c=this.indexOf(a);
if(-1===c||!a)this.fire("error",{error:"Model is not in the list.",index:c,model:a,src:"remove"});else return c=b.merge(f,{index:c,model:a}),f.silent?this._defRemoveFn(c):this.fire("remove",c),a},_sort:function(a,f,b){a=this._compare(this.comparator(a),this.comparator(f));return 0===a?a:b&&b.descending?-a:a},_afterIdChange:function(a){var f=a.newVal,b=a.prevVal;a=a.target;if(m.isValue(b))if(this._idMap[b]===a)delete this._idMap[b];else return;else if(-1===this.indexOf(a))return;m.isValue(f)&&(this._idMap[f]=
a)},_defAddFn:function(a){var f=a.model,b=f.get("id");this._clientIdMap[f.get("clientId")]=f;m.isValue(b)&&(this._idMap[b]=f);this._attachList(f);this._items.splice(a.index,0,f)},_defRemoveFn:function(a){var f=a.model,b=f.get("id");this._detachList(f);delete this._clientIdMap[f.get("clientId")];m.isValue(b)&&delete this._idMap[b];this._items.splice(a.index,1)},_defResetFn:function(a){"sort"===a.src?this._items=a.models.concat():(this._clear(),a.models.length&&this.add(a.models,{silent:!0}))}},{NAME:"modelList"});
b.augment(c,b.ArrayList)},"3.17.2",{requires:"array-extras array-invoke arraylist base-build escape json-parse model".split(" ")})},1319:function(t,u){YUI.add("squarespace-hb-compare",function(b){b.Handlebars.registerHelper("if_eq",function(b,c){return b==c.hash.compare?c.fn(this):c.inverse(this)});b.Handlebars.registerHelper("unless_eq",function(b,c){return b==c.hash.compare?c.inverse(this):c.fn(this)});b.Handlebars.registerHelper("if_gt",function(b,c){return b>c.hash.compare?c.fn(this):c.inverse(this)});
b.Handlebars.registerHelper("unless_gt",function(b,c){return b>c.hash.compare?c.inverse(this):c.fn(this)});b.Handlebars.registerHelper("if_lt",function(b,c){return b<c.hash.compare?c.fn(this):c.inverse(this)});b.Handlebars.registerHelper("unless_lt",function(b,c){return b<c.hash.compare?c.inverse(this):c.fn(this)});b.Handlebars.registerHelper("if_gteq",function(b,c){return b>=c.hash.compare?c.fn(this):c.inverse(this)});b.Handlebars.registerHelper("unless_gteq",function(b,c){return b>=c.hash.compare?
c.inverse(this):c.fn(this)});b.Handlebars.registerHelper("if_lteq",function(b,c){return b<=c.hash.compare?c.fn(this):c.inverse(this)});b.Handlebars.registerHelper("unless_lteq",function(b,c){return b<=c.hash.compare?c.inverse(this):c.fn(this)})},"1.0",{requires:["handlebars-base"]})},1399:function(t,u){YUI.add("squarespace-tourdates-bandsintown-list-template",function(b){var k=b.Handlebars;(function(){var b=k.template;(k.templates=k.templates||{})["tourdates-bandsintown-list.html"]=b(function(b,c,
f,a,h){function k(a,b){var c;return(c=f["if"].call(a,a.errors,{hash:{},inverse:n.program(5,r,b),fn:n.program(3,t,b),data:b}))||0===c?c:""}function t(a,b){return""}function r(a,b){var c="",e,g;if((g=f["if"].call(a,(e=b,null==e||!1===e?e:e.index),{hash:{},inverse:n.noop,fn:n.program(6,s,b),data:b}))||0===g)c+=g;c+='\n  {\n      "@context": "http://schema.org",\n      "@type": "MusicEvent",\n      "name": "';(g=f.title)?g=g.call(a,{hash:{},data:b}):(g=a.title,g=typeof g===p?g.apply(a):g);c+=q(g)+'",\n      "image": "'+
q((e=(e=(e=a.artists,null==e||!1===e?e:e[0]),null==e||!1===e?e:e.image_url),typeof e===p?e.apply(a):e))+'",\n      "startDate": "';(g=f.datetime)?g=g.call(a,{hash:{},data:b}):(g=a.datetime,g=typeof g===p?g.apply(a):g);c+=q(g)+'",\n      "url": "';(g=f.ticket_url)?g=g.call(a,{hash:{},data:b}):(g=a.ticket_url,g=typeof g===p?g.apply(a):g);c+=q(g)+'",\n      "location": {\n          "@type": "Place",\n          "name": "'+q((e=(e=a.venue,null==e||!1===e?e:e.name),typeof e===p?e.apply(a):e))+'",\n          "address": {\n              "@type": "PostalAddress",\n              "addressCountry": "'+
q((e=(e=a.venue,null==e||!1===e?e:e.country),typeof e===p?e.apply(a):e))+'",\n              "addressLocality": "'+q((e=(e=a.venue,null==e||!1===e?e:e.city),typeof e===p?e.apply(a):e))+'",\n              "addressRegion": ""\n          },\n          "geo": {\n              "@type": "GeoCoordinates",\n              "latitude": '+q((e=(e=a.venue,null==e||!1===e?e:e.latitude),typeof e===p?e.apply(a):e))+',\n              "longitude": '+q((e=(e=a.venue,null==e||!1===e?e:e.longitude),typeof e===p?e.apply(a):
e))+'\n          }\n      },\n      "performer": [\n          {\n              "@type": "MusicGroup",\n              "name": "'+q((e=(e=(e=a.artists,null==e||!1===e?e:e[0]),null==e||!1===e?e:e.name),typeof e===p?e.apply(a):e))+'",\n              "sameAs": "http://www.bandsintown.com"\n          }\n      ],\n      "offers": [\n          {\n              "@type": "Offer",\n              "url": "';(g=f.ticket_url)?g=g.call(a,{hash:{},data:b}):(g=a.ticket_url,g=typeof g===p?g.apply(a):g);c+=q(g)+'",\n              "availability": "';
g={hash:{},inverse:n.noop,fn:n.program(8,u,b),data:b};if((g=(e=f["equals-string"]||a["equals-string"],e?e.call(a,a.ticket_status,"available",g):w.call(a,"equals-string",a.ticket_status,"available",g)))||0===g)c+=g;g={hash:{},inverse:n.noop,fn:n.program(10,z,b),data:b};if((g=(e=f["equals-string"]||a["equals-string"],e?e.call(a,a.ticket_status,"unavailable",g):w.call(a,"equals-string",a.ticket_status,"unavailable",g)))||0===g)c+=g;return c+'",\n              "category": "primary"\n          }\n      ]\n  }\n  '}
function s(a,b){return","}function u(a,b){return"InStock"}function z(a,b){return"SoldOUT"}function x(a,b){var c,e;c="\n\n      ";if((e=f["if"].call(a,a.errors,{hash:{},inverse:n.program(17,C,b),fn:n.program(14,A,b),data:b}))||0===e)c+=e;return c+"\n\n    "}function A(a,b){var c,e;c="\n\n        ";if((e=f.each.call(a,a.errors,{hash:{},inverse:n.noop,fn:n.program(15,B,b),data:b}))||0===e)c+=e;return c+"\n\n      "}function B(a,b){var f;return f=""+('\n        <li class="tour-item-error">\n          <div class="state-message">'+
q(typeof a===p?a.apply(a):a)+"</div>\n        </li>\n        ")}function C(a,b){var c,e,g;c='\n\n        <li class="tour-item">\n\n          <div class="tour-timeframe" data-tour-datetime="';(e=f.datetime)?e=e.call(a,{hash:{},data:b}):(e=a.datetime,e=typeof e===p?e.apply(a):e);c+=q(e)+'">\n            <div class="tour-date">';g={hash:{format:"date"},data:b};c+=q((e=f["tourdates-bit-datetime"]||a["tourdates-bit-datetime"],e?e.call(a,a.datetime,g):w.call(a,"tourdates-bit-datetime",a.datetime,g)))+'</div>\n            <div class="tour-weekday">';
g={hash:{format:"weekday"},data:b};c+=q((e=f["tourdates-bit-datetime"]||a["tourdates-bit-datetime"],e?e.call(a,a.datetime,g):w.call(a,"tourdates-bit-datetime",a.datetime,g)))+'</div>\n          </div>\n\n          <div class="tour-venue">\n            <a href="';(g=f.facebook_rsvp_url)?g=g.call(a,{hash:{},data:b}):(g=a.facebook_rsvp_url,g=typeof g===p?g.apply(a):g);c+=q(g)+'" class="tour-venue-link" target="_blank">\n            \n              <div class="tour-venue-name">'+q((e=(e=a.venue,null==
e||!1===e?e:e.name),typeof e===p?e.apply(a):e))+"</div>\n\n              ";g={hash:{compare:1},inverse:n.noop,fn:n.program(18,D,b),data:b};if((g=(e=f.if_gt||a.if_gt,e?e.call(a,(e=a.artists,null==e||!1===e?e:e.length),g):w.call(a,"if_gt",(e=a.artists,null==e||!1===e?e:e.length),g)))||0===g)c+=g;c+='\n\n            </a>\n          </div>\n\n          <div class="tour-location"><a href="';(g=f.facebook_rsvp_url)?g=g.call(a,{hash:{},data:b}):(g=a.facebook_rsvp_url,g=typeof g===p?g.apply(a):g);c+=q(g)+
'" class="tour-location-link" target="_blank">';(g=f.formatted_location)?g=g.call(a,{hash:{},data:b}):(g=a.formatted_location,g=typeof g===p?g.apply(a):g);c+=q(g)+'</a></div>\n\n          <div class="tour-actions">\n            <a href="';if((g=f["if"].call(a,a.ticket_url,{hash:{},inverse:n.program(24,E,b),fn:n.program(22,F,b),data:b}))||0===g)c+=g;c+='" class="tour-button tour-button--ticket ';g={hash:{},inverse:n.noop,fn:n.program(26,G,b),data:b};if((g=(e=f["equals-string"]||a["equals-string"],
e?e.call(a,a.ticket_type,"Sold Out",g):w.call(a,"equals-string",a.ticket_type,"Sold Out",g)))||0===g)c+=g;c+=" ";if((g=f["if"].call(a,a.ticket_url,{hash:{},inverse:n.program(28,H,b),fn:n.program(3,t,b),data:b}))||0===g)c+=g;c+=' sqs-editable-button " target="';if((g=f["if"].call(a,a.ticket_url,{hash:{},inverse:n.program(32,I,b),fn:n.program(30,J,b),data:b}))||0===g)c+=g;c+='">';(g=f.ticket_type)?g=g.call(a,{hash:{},data:b}):(g=a.ticket_type,g=typeof g===p?g.apply(a):g);c+=q(g)+'</a>\n            <a href="';
(g=f.facebook_rsvp_url)?g=g.call(a,{hash:{},data:b}):(g=a.facebook_rsvp_url,g=typeof g===p?g.apply(a):g);return c+=q(g)+'" class="tour-button tour-button--rsvp sqs-editable-button" target="_blank"></a>\n          </div>\n\n        </li>\n      \n      '}function D(a,b){var c,e;c='\n              <div class="tour-lineup">\n                ';if((e=f.each.call(a,a.artists,{hash:{},inverse:n.noop,fn:n.program(19,K,b),data:b}))||0===e)c+=e;return c+"\n              </div>\n              "}function K(a,
b){var c,e,g;c="\n                  ";g={hash:{compare:0},inverse:n.noop,fn:n.program(20,L,b),data:b};if((g=(e=f.if_gt||a.if_gt,e?e.call(a,(e=b,null==e||!1===e?e:e.index),g):w.call(a,"if_gt",(e=b,null==e||!1===e?e:e.index),g)))||0===g)c+=g;return c+"\n                "}function L(a,b){var c,e;c='\n                  <div class="tour-lineup-item">';(e=f.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===p?e.apply(a):e);return c+=q(e)+"</div>\n                  "}function F(a,b){var c;(c=f.ticket_url)?
c=c.call(a,{hash:{},data:b}):(c=a.ticket_url,c=typeof c===p?c.apply(a):c);return q(c)}function E(a,b){return"#"}function G(a,b){return"tour-button--soldout"}function H(a,b){return"tour-button--disabled"}function J(a,b){return"_blank"}function I(a,b){return"_self"}this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,b.helpers);h=h||{};var v,n=this,p="function",q=this.escapeExpression,w=f.helperMissing,y=f.blockHelperMissing;b='<script type="application/ld+json">\n';if((a=f["if"].call(c,(v=c.data,null==
v||!1===v?v:v.length),{hash:{},inverse:n.noop,fn:n.program(1,function(a,b){var c,e,g;c="\n[\n  ";g={hash:{},inverse:n.noop,fn:n.program(2,k,b),data:b};(e=f.data)?e=e.call(a,g):(e=a.data,e=typeof e===p?e.apply(a):e);f.data||(e=y.call(a,e,g));if(e||0===e)c+=e;return c+"\n]\n"},h),data:h}))||0===a)b+=a;b+='\n\x3c/script>\n\n<ul class="tour-list">\n\n  ';if((a=f["if"].call(c,(v=c.data,null==v||!1===v?v:v.length),{hash:{},inverse:n.program(34,function(a,b){return'\n\n      <li class="tour-item-no-results"></li>\n\n  '},
h),fn:n.program(12,function(a,b){var c,e,g;c="\n\n    ";g={hash:{},inverse:n.noop,fn:n.program(13,x,b),data:b};(e=f.data)?e=e.call(a,g):(e=a.data,e=typeof e===p?e.apply(a):e);f.data||(e=y.call(a,e,g));if(e||0===e)c+=e;return c+"\n\n  "},h),data:h}))||0===a)b+=a;return b+"\n\n</ul>"})})();b.Handlebars.registerPartial("tourdates-bandsintown-list.html".replace("/","."),k.templates["tourdates-bandsintown-list.html"])},"1.0",{requires:["handlebars-base"]})},1733:function(t,u){YUI.add("squarespace-widgets-tourdates-bandsintown",
function(b){function k(b,a,c){b+="";a+="";for(var k=b.length;k<c;k++)b=a+b;return b}function c(b){return[b.getFullYear(),k(b.getMonth()+1,0,2),k(b.getDate(),0,2)].join("-")}var l=b.Base.create("bandsInTownTourDatesListModel",b.ModelList,[],{sync:function(f,a,h){if("read"===f){f="squarespace-"+b.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","identifier"]);a=encodeURIComponent(this.get("artistId"));var k=c(new Date(this.get("startDate"))),l=c(new Date(this.get("endDate"))),m;"upcoming"===
this.get("timeframe")?m="upcoming":"dateRange"===this.get("timeframe")&&(m=k+","+l);m="//api.bandsintown.com/artists/"+a+"/events.json?api_version=2.0&app_id="+f+"&date="+m+"&callback={callback}";h=b.Lang.isFunction(h)?h:function(){};b.jsonp(m,{on:{success:function(a){a.errors&&(a=[a]);h(null,a)},failure:function(){h("Request failed!");console.log("Request failed!")},timeout:function(){h("Request timed out.");console.log("Request timed out.")}},timeout:1E4})}else console.warn("Unsupported sync action: "+
f)}},{ATTRS:{artistId:{value:null},timeframe:{value:null},startDate:{value:null},endDate:{value:null}}});b.namespace("Squarespace.Widgets");var m=b.Squarespace.Widgets.BandsInTownTourDatesList=b.Base.create("bandsInTownTourDatesList",b.Squarespace.SSWidget,[],{initializer:function(){var c=this.get("boundingBox"),a=new b.Squarespace.Spinner({size:30,color:"dark",render:c});this._registerEvent(b.on("domready",function(){this.get("modelList").load(b.bind(function(){this.set("loaded",!0);c.addClass("loaded");
a.destroy()},this))},this))},bindUI:function(){m.superclass.bindUI.call(this);this.after("loadedChange",this.renderTemplateAgain,this);this._registerEvent(b.on("windowresize",function(){this.adjustLayout()},b.config.win,this))},adjustLayout:function(){var b=this.get("boundingBox");b.toggleClass("tourblock-has-small-container",450>b.get("offsetWidth"))},renderTemplateAgain:function(){this.adjustLayout();this.get("contentBox").empty().append(this.renderTemplate());this.appendStructuredData()},appendStructuredData:function(){var c=
document.createElement("script");c.type="application/ld+json";c.text=this.get("contentBox").one("script").get("innerHTML");b.one("head").append(c)},_getHBTemplateContext:function(){return{data:this.get("modelList").toJSON()}}},{CSS_PREFIX:"sqs-tourdates-bandsintown-list",HANDLEBARS_TEMPLATE:"tourdates-bandsintown-list.html",ATTRS:{artistId:{value:null},timeframe:{value:null},startDate:{value:null},endDate:{value:null},modelList:{valueFn:function(){return new l(this.getAttrs(["artistId","timeframe",
"startDate","endDate"]))}},loaded:{value:!1}}});b.Handlebars.registerHelper("tourdates-bit-datetime",function(b,a){var c=b.match(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/)[1];d=new Date(c+"Z");var c="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),k="Sun Mon Tue Wed Thu Fri Sat".split(" ");if("date"===a.hash.format)return c[d.getUTCMonth()]+" "+d.getUTCDate();if("weekday"===a.hash.format)return k[d.getUTCDay()]});b.Handlebars.registerHelper("equals-string",function(c,
a,h){return b.Handlebars.helpers["if"].call(this,function(){return c==a.toString()},h)})},"1.0",{requires:"jsonp model-list squarespace-hb-compare squarespace-spinner squarespace-ss-widget squarespace-tourdates-bandsintown-list-template".split(" ")})},2953:function(t,u){YUI.add("squarespace-tourdates",function(b){var k;b.config.win.Squarespace.onInitialize(b,function(){k=[];b.all(".sqs-block-tourdates[data-block-json]").each(function(c){var l=JSON.parse(c.getAttribute("data-block-json"));c=(new b.Squarespace.Widgets.BandsInTownTourDatesList({artistId:l.artistId,
timeframe:l.timeframe,startDate:l.startDate,endDate:l.endDate})).render(c);k.push(c)})});b.config.win.Squarespace.onDestroy(b,function(){k.forEach(function(b){b.destroy&&b.destroy()});b.all(".sqs-block-tourdates[data-block-json]").each(function(b){b.empty()});k=null})},"1.0",{requires:["squarespace-widgets-tourdates-bandsintown"]})}});
